  > 基础概念
  
  - (1) PCB概念   
    用户空间 0-3G  
    内核空间 3G-4G  
    PCB属于内核空间，中有file_struct数组指针，存储该进程打开的设备文件列表(fopen打开文件)  

  - (2) C程序存储空间布局
    C程序的存储空间布局：C程序一直由下列几部分组成：  
        正文段：这是由CPU执行的机器指令部分  
               通常正文段是可以共享的。一个程序的可以同时执行N次，但是该程序的正文段在内存中只需要有一份而不是N份  
               通常正文段是只读的，以防止程序由于意外而修改其指令  
        初始化数据段：通常将它称作数据段。  
               它包含了程序中明确地赋了初值的变量：包括函数外的赋初值的全局变量、函数内的赋初值的静态变量  
        未初始化数据段：通常将它称作bss段。在程序开始执行之前，内核将此段中的数据初始化为0或者空指针。
               它包含了程序中未赋初值的变量：包括函数外的未赋初值的全局变量、函数内的未赋初值的静态变量  
        栈段：临时变量以及每次函数调用时所需要保存的信息都存放在此段中。
               每次函数调用时，函数返回地址以及调用者的环境信息（如某些CPU 寄存器的值）都存放在栈中  
               最新的正被执行的函数，在栈上为其临时变量分配存储空间  
               通过这种方式使用栈，C 递归函数可以工作。递归函数每次调用自身时，就创建一个新的栈帧，因此某一次函数调用中的变量不影响下一次调用中的变量  
        堆段：通常在堆中进行动态存储分配。  
               由于历史习惯，堆位于未初始化数据段和栈段之间  
               
![image](https://user-images.githubusercontent.com/42632290/137581091-6a873cfd-6170-47de-aebc-0ed66e996867.png)

注意：  

    栈从高地址向低地址增长。堆顶和栈顶之间未使用的虚拟地址空间很大  
    未初始化数据段的内容并不存放在磁盘程序文件中。需要存放在磁盘程序文件中的段只有正文段和初始化数据段  
        因为内核在程序开始运行前将未初始化数据段设置为 0  

  - (3) 环境变量

    环境变量：是指操作系统中用来指定操作系统运行环境的一些参数  
              命令：env，可以看到所有的环境变量
    相关函数：  
```cpp
    #include<stdlib.h>
    char *getenv(const char*name);

描述：获取环境的值  

参数：  
    name：环境变量名  
    
返回值：  
    成功：指向与name关联的value的指针  
    失败：返回NULL  
    
常用的环境变量民有：
    "HOME"：home目录
    "LANG":语言
    "LOGNAME"：登录名
    "PATH"：搜索路径
    "PWD"：当前工作目录的绝对路径名
    "SHELL"：用户首选的SHELL
    "TERM"：终端类型
    "TMPDIR"：在其中创建临时文件的目录路径名
    "TZ"：时区信息

    #include<stdlib.h>
    int putenv(char *str);
    int setenv(const char *name,const char *value,int rewrite);
    int unsetenv(const char *name);

描述:设置环境变量的值

参数：  
    对于putenv函数：  
        str：形式为name=value的字符串，将其放置到进程的环境表中。如果name已经存在，则先删除其原来的语义  
    对于setenv函数：  
        name：环境变量名  
        value：环境变量的值  
        rewrite：指定覆写行为。  
                 如果它为0，则如果name在环境表中已存在，则直接返回而不修改。同时也不报错   
                 如果它非0，则如果name在环境表中已存在，则首先删除它现有的定义，然后添加新的定义  
    对于unsetenv函数：  
        name：环境变量名  
返回值：  
    对于 putenv函数：  
        成功：返回0  
        失败：返回非0  
    对于setenv/unsetenv函数：  
        成功： 返回 0  
        失败： 返回 -1  

设置环境变量，也可以用命令export key=value
```

  - (4) 进程控制块  

        每个进程在内核中都有一个进程控制块（PCB）来维护进程相关的信息，linux内核的进程控制块是      task_stuct结构体

        a) 进程id，pid_t类型，非负整数  
        b) 进程的状态，初始、就绪、运行、挂起、停止等状态  
        c) 进程切换时需要保存和恢复的一些CPU寄存器  
        d) 描述虚拟地址空间的信息  
        e) 描述控制终端的信息  
        f) 当前工作目录  
        g) umask掩码  
        h) 文件描述符表，包含很多指向file结构体的指针  
        i) 和信号相关的信息  
        j) 用户id和组id  
        k) 会话（Session）和进程组  
        l) 进程可以使用的资源上限 (可以使用ulimit -a 查看所有进程使用的资源设置)  

  - (5) 进程状态  

     进程状态有： 初始、就绪、运行、挂起、终止
 
     就绪状态----------------->（获得CPU）--------------------------->运行状态  
     运行状态----------------->（获得的时间片结束）------------------> 就绪状态  
     运行状态----------------->（因等待其他资源，主动交出CPU）-------> 挂起状态  
     挂起状态----------------->（等待的非CPU资源到位了）-------------> 就绪状态  
     就绪|运行|挂起状态----------------------------------------------> 终止状态  
 
![image](https://user-images.githubusercontent.com/42632290/137582317-998adf6f-63fb-4648-a892-43e91a92696e.png)
  
    就绪态：进程准备运行  
    运行态：进程正在运行  
    挂起态：进程在等待一个事件的发生或某种系统资源  
    终止态：已终止的进程，但pcb没有被释放  

  - (6) 常用进程命令

        ps：查看系统进程信息（可以加|grep test根据关键字查看进程）  
            -ef   显示所有进程信息  
            -aux  显示进程当前状态 
            -ajx  可以追溯进程之间的血缘关系  
            
        top：查看进程动态信息  
        
        /proc：查看进程详细信息  
        
        nice：按用户指定的优先级运行进程（nice –n number ./test）  
             【-20,19】-20最高优先级，19最低，普通用户只能降优先级，不能升  
             
        renice：改变正在运行进程的优先级  
                管理员可以随便改变优先级，普通用户只能降低优先级  
                
        jobs：查看后台进程（./test &后台运行）  
              kill %pid 杀死后台进程  
              
        bg：将挂起的进程在后台运行（bg n）  
            ctrl+z：将前台进程放进后台并挂起  
            
        fg：把后台的进程放到前台运行（fg n）  

        kill:杀死进程  
            -I 查看所有信号  
            -9 pid 给进程发送9号信号，即关闭进程  
            pid 可以直接关闭进程  

  - (7) 进程创建



  - (8) 进程终止


  - (9) exec函数族














